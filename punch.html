<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHACK YOUR BOSS ¬∑ emoji edition</title>
    <style>
        * {
            box-sizing: border-box;
            user-select: none;
        }

        body {
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(145deg, #1f3a4b 0%, #0f2838 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', 'Arial Black', system-ui, sans-serif;
            padding: 16px;
        }

        .game-container {
            background: #2d4e5e;
            padding: 30px 30px 40px;
            border-radius: 70px 70px 40px 40px;
            box-shadow: 0 20px 0 #0f2a33, 0 30px 30px rgba(0,0,0,0.5);
            border-bottom: 6px solid #6995a5;
        }

        .game-panel {
            background: #b15a3a;
            background-image: radial-gradient(circle at 20% 30%, #cf7e5a, #8b3e24);
            border-radius: 50px 50px 30px 30px;
            padding: 30px 30px 20px;
            box-shadow: inset 0 -6px 0 #622f1c, inset 0 6px 10px #e6a179;
            border: 3px solid #ffc29e;
        }

        h1 {
            text-align: center;
            margin: 0 0 20px 0;
            font-size: 48px;
            letter-spacing: 4px;
            color: #fadf9e;
            text-shadow: 4px 4px 0 #6b2e0e, 7px 7px 0 #1f1f1f;
            transform: rotate(-1deg);
            word-break: keep-all;
        }

        .boss-stage {
            background: #424242;
            border-radius: 120px 120px 40px 40px;
            padding: 40px 50px 30px;
            box-shadow: inset 0 -8px 0 #1e1e1e, 0 12px 0 #2d2d2d;
            border-left: 6px solid #747474;
            border-right: 6px solid #505050;
            position: relative;
            margin-bottom: 30px;
        }

        /* ---------- EMOJI BOSS ---------- */
        .boss-emoji {
            font-size: 220px;
            line-height: 1;
            text-align: center;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><polygon points="2,2 30,2 18,18 26,28 16,20 8,28 14,18" fill="%23b32b2b" stroke="%23550000" stroke-width="2"/></svg>') 16 8, auto;
            transition: transform 0.05s, filter 0.1s;
            display: inline-block;
            width: 100%;
            filter: drop-shadow(0 16px 0 #3f2c1e) drop-shadow(0 20px 10px #00000066);
            transform-origin: center;
        }

        /* angry boss variation when hit many times */
        .boss-emoji.angry {
            filter: drop-shadow(0 12px 0 #a12525) drop-shadow(0 20px 10px black) hue-rotate(-10deg) brightness(1.1);
        }

        .desk {
            background: #6d4c3b;
            height: 30px;
            width: 380px;
            margin: -10px auto 0;
            border-radius: 20px 20px 60px 60px;
            box-shadow: 0 14px 0 #3b281e, 0 20px 10px rgba(0,0,0,0.4);
            border-bottom: 6px solid #a48263;
        }

        .hit-counter {
            background: #352415;
            padding: 16px 20px;
            border-radius: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #fcc48e;
            font-weight: bold;
            font-size: 28px;
            text-shadow: 2px 2px 0 #4f2c0c;
            box-shadow: inset 0 -3px 0 #614d38, 0 8px 0 #1f140e;
            margin: 20px 10px 30px;
        }

        .hits-box {
            background: #f0dab6;
            padding: 10px 35px;
            border-radius: 40px;
            color: #2c170a;
            font-size: 48px;
            font-family: monospace;
            letter-spacing: 6px;
            box-shadow: inset 0 -4px 0 #a3927a, 0 4px 0 #503e2b;
            line-height: 1;
        }

        .reset-area {
            display: flex;
            justify-content: center;
        }

        .whack-btn {
            background: #d43f1a;
            border: none;
            font-size: 36px;
            font-weight: bold;
            color: #ffd78c;
            text-shadow: 3px 3px 0 #852e12;
            padding: 15px 50px;
            border-radius: 100px;
            box-shadow: 0 12px 0 #792f12, 0 5px 15px black;
            cursor: pointer;
            transition: 0.05s linear;
            letter-spacing: 4px;
            border: 2px solid #ffba7a;
        }

        .whack-btn:active {
            transform: translateY(8px);
            box-shadow: 0 4px 0 #792f12, 0 8px 12px black;
        }

        .footnote {
            text-align: center;
            color: #bab86c;
            margin-top: 30px;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 2px 2px 0 #2d471b;
        }
    </style>
</head>
<body>
<div class="game-container">
    <div class="game-panel">
        <h1>‚ö° WHACK¬∑BOSS ‚ö°</h1>
        <div class="boss-stage">
            <!-- EMOJI BOSS (click target) -->
            <div id="bossEmoji" class="boss-emoji">
                üò†
            </div>
            <div class="desk"></div>
        </div>

        <div class="hit-counter">
            <span>üíºüí¢</span>
            <span class="hits-box" id="hitDisplay">0</span>
        </div>

        <div class="reset-area">
            <button class="whack-btn" id="whackBtn">ü§ú WHACK!</button>
        </div>
        <div class="footnote">
            ‚ö†Ô∏è click the angry emoji ¬∑ each whack hurts
        </div>
    </div>
</div>

<script>
    (function() {
        // ----- game state -----
        let hitCount = 0;
        const maxHits = 100000000;           // after 20 hits boss emoji changes and resets

        // DOM elements
        const bossEmoji = document.getElementById('bossEmoji');
        const hitSpan = document.getElementById('hitDisplay');
        const whackBtn = document.getElementById('whackBtn');

        // helper: apply whack effect on emoji
        function whackEffect() {
            // squash and rotate
            bossEmoji.style.transform = 'scale(0.75, 0.6) rotate(3deg)';
            bossEmoji.style.transition = 'transform 0.03s, filter 0.1s';
            // red flash via filter
            bossEmoji.style.filter = 'drop-shadow(0 16px 0 #3f2c1e) drop-shadow(0 20px 10px black) brightness(1.5) saturate(3)';

            // remove after short time
            setTimeout(() => {
                bossEmoji.style.transform = '';
                // restore appropriate filter (angry or normal based on hitCount)
                updateAngryAppearance();
            }, 120);
        }

        // change emoji & style based on hit count
        function updateAngryAppearance() {
            if (hitCount >= maxHits) {
                // KO moment -> special face, but we handle in addHit
                return;
            }

            // choose emoji and extra class based on how many hits
            if (hitCount > 12) {
                bossEmoji.textContent = 'üë≥üèø‚Äç‚ôÇÔ∏è';   // very angry
                bossEmoji.classList.add('angry');
            } else if (hitCount > 5) {
                bossEmoji.textContent = 'üë≥üèø‚Äç‚ôÇÔ∏è';   // steaming
                bossEmoji.classList.remove('angry');
            } else {
                bossEmoji.textContent = 'üë¥üèø';   // default annoyed
                bossEmoji.classList.remove('angry');
            }

            // sync filter: standard drop shadow (no extra class needed if we use angry class)
            if (!bossEmoji.classList.contains('angry')) {
                bossEmoji.style.filter = 'drop-shadow(0 16px 0 #3f2c1e) drop-shadow(0 20px 10px #00000066)';
            } else {
                bossEmoji.style.filter = 'drop-shadow(0 12px 0 #a12525) drop-shadow(0 20px 10px black) hue-rotate(-10deg) brightness(1.1)';
            }
        }

        // core hit function
        function addHit() {
            hitCount++;
            
            // normal hit effect (squash + flash)
            whackEffect();

            if (hitCount >= maxHits) {
                // BOSS KNOCKOUT ‚Äì dramatic emoji transformation
                bossEmoji.style.transition = 'transform 0.2s, opacity 0.2s, filter 0.2s';
                bossEmoji.style.transform = 'rotate(20deg) scale(0.2)';
                bossEmoji.style.opacity = '0.4';
                bossEmoji.textContent = 'üí´';   // dizzy / stars
                bossEmoji.style.filter = 'drop-shadow(0 0 10px gold)';

                // update hit display to show explosion
                hitSpan.innerText = 'üí•';

                // reset after short delay
                setTimeout(() => {
                    hitCount = 0;
                    hitSpan.innerText = hitCount;
                    bossEmoji.style.transform = '';
                    bossEmoji.style.opacity = '1';
                    bossEmoji.textContent = 'üë¥üèø';   // back to start
                    bossEmoji.style.filter = 'drop-shadow(0 16px 0 #3f2c1e) drop-shadow(0 20px 10px #00000066)';
                    bossEmoji.classList.remove('angry');
                    bossEmoji.style.transition = '';
                }, 300);
            } else {
                // update counter
                hitSpan.innerText = hitCount;
                // update emoji mood based on new hitCount
                updateAngryAppearance();
            }
        }

        // event listeners: click on emoji boss
        bossEmoji.addEventListener('click', (e) => {
            e.stopPropagation();
            addHit();
        });

        // whack button also triggers hit
        whackBtn.addEventListener('click', () => {
            addHit();playAudio();
            // extra shake via quick class (already have whack effect)
            bossEmoji.style.animation = 'none';
            bossEmoji.offsetHeight; // force reflow
            bossEmoji.style.animation = 'emojiShake 0.1s ease';
        });

        // add custom shake keyframe for emoji
        const styleSheet = document.createElement("style");
        styleSheet.textContent = `
            @keyframes emojiShake {
                0% { transform: translate(0,0) rotate(0); }
                20% { transform: translate(-6px, 4px) rotate(-5deg); }
                40% { transform: translate(6px, -3px) rotate(5deg); }
                60% { transform: translate(-4px, 2px) rotate(-3deg); }
                80% { transform: translate(3px, -1px) rotate(2deg); }
                100% { transform: translate(0,0) rotate(0); }
            }
            .boss-emoji:active {
                filter: brightness(0.6) saturate(2) !important;
            }
        `;
        document.head.appendChild(styleSheet);

        // mouse down / up for extra flinch
        bossEmoji.addEventListener('mousedown', (e) => {
            e.preventDefault();
            bossEmoji.style.transform = 'scale(0.9) rotate(4deg)';
            bossEmoji.style.filter = 'brightness(0.5) sepia(1) hue-rotate(-20deg)';
        });

        bossEmoji.addEventListener('mouseup', () => {
            bossEmoji.style.transform = '';
            // restore correct filter via updateAngryAppearance but we have to be careful
            // just reset to current state
            if (hitCount < maxHits) {
                updateAngryAppearance();
            } else {
                bossEmoji.style.filter = 'drop-shadow(0 0 10px gold)'; // keep KO look
            }
        });

        bossEmoji.addEventListener('mouseleave', () => {
            // if mouse leaves while holding, revert
            if (hitCount < maxHits) {
                bossEmoji.style.transform = '';
                updateAngryAppearance();
            } else {
                bossEmoji.style.transform = '';
                // keep KO look
            }
        });

        // initial display
        hitSpan.innerText = '0';
        bossEmoji.textContent = 'üë¥üèø';
        bossEmoji.style.filter = 'drop-shadow(0 16px 0 #3f2c1e) drop-shadow(0 20px 10px #00000066)';

        console.log('üë≥üèø‚Äç‚ôÇÔ∏è Emoji boss is ready to be whacked!');
    })();

    function playAudio() { 
            var a = document.getElementById("myAudio");
            a.loop = true; // Fixed: was 'audio.loop' but should be 'a.loop'
            if (a.paused) {
                a.play();
            }
        };
</script>
 <audio id="myAudio" src="music/Tunak.mp3"></audio>
<!-- additional flavor -->
</body>
</html>