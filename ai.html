<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Chatbot | Smart Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        /* Base Styles */
        :root {
            --primary: #4361ee;
            --primary-dark: #3a0ca3;
            --secondary: #4cc9f0;
            --accent: #7209b7;
            --success: #4ade80;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark-bg: #0f172a;
            --dark-card: #1e293b;
            --light-bg: #f8fafc;
            --light-card: #ffffff;
            --text-dark: #1e293b;
            --text-light: #f1f5f9;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --radius: 12px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1e293b 100%);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Container Layout */
        .container {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            min-height: 100vh;
            gap: 1px;
            background: rgba(255, 255, 255, 0.05);
        }

        /* Sidebar */
        .sidebar {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .sidebar-header {
            text-align: center;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ai-avatar {
            position: relative;
            width: 80px;
            height: 80px;
            margin: 0 auto 1rem;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }

        .ai-status {
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 15px;
            height: 15px;
            background-color: var(--success);
            border-radius: 50%;
            border: 3px solid var(--dark-card);
        }

        .ai-status.active::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            animation: pulse 2s infinite;
            background-color: var(--success);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .sidebar-header p {
            color: var(--text-light);
            opacity: 0.7;
            font-size: 0.9rem;
        }

        /* Chat History */
        .chat-history h3, .ai-capabilities h3, .settings h3 {
            font-size: 0.9rem;
            color: var(--text-light);
            opacity: 0.7;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .history-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.05);
        }

        .history-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .history-item.active {
            background: rgba(67, 97, 238, 0.2);
            border: 1px solid rgba(67, 97, 238, 0.5);
        }

        .history-item i {
            color: var(--secondary);
            font-size: 1.1rem;
        }

        .history-title {
            font-weight: 500;
            display: block;
            font-size: 0.9rem;
        }

        .history-time {
            font-size: 0.75rem;
            opacity: 0.6;
            display: block;
            margin-top: 0.25rem;
        }

        /* Capability Tags */
        .capability-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tag {
            padding: 0.35rem 0.75rem;
            background: rgba(67, 97, 238, 0.2);
            border: 1px solid rgba(67, 97, 238, 0.3);
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        /* Settings */
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-item select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            padding: 0.25rem 0.5rem;
            color: var(--text-light);
            width: 120px;
        }

        .setting-item input[type="range"] {
            width: 120px;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
        }

        .setting-item input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--light-card);
            border: 2px solid var(--primary);
            cursor: pointer;
        }

        /* Switch Toggle */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.1);
            transition: var(--transition);
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--success);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Main Chat Area */
        .main-chat {
            display: flex;
            flex-direction: column;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
        }

        /* Chat Header */
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(30, 41, 59, 0.8);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .typing-indicator {
            display: none;
            gap: 0.25rem;
        }

        .typing-indicator.active {
            display: flex;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--secondary);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        .chat-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .icon-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: var(--text-light);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .header-right {
            display: flex;
            gap: 0.5rem;
        }

        /* Messages Container */
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .message {
            display: flex;
            gap: 1rem;
            max-width: 85%;
            animation: messageAppear 0.3s ease-out;
        }

        .user-message {
            margin-left: auto;
            flex-direction: row-reverse;
        }

        .ai-message {
            margin-right: auto;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .user-message .message-avatar {
            background: linear-gradient(135deg, var(--success), #22c55e);
        }

        .message-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            padding: 1.25rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            flex: 1;
        }

        .user-message .message-content {
            background: rgba(67, 97, 238, 0.15);
            border-color: rgba(67, 97, 238, 0.3);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sender {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .time {
            font-size: 0.75rem;
            opacity: 0.6;
        }

        .message-text {
            line-height: 1.6;
            word-wrap: break-word;
        }

        .message-text ul {
            margin: 0.5rem 0 0.5rem 1.5rem;
        }

        .message-text li {
            margin: 0.25rem 0;
        }

        .message-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .quick-action {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-light);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quick-action:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        /* Quick Suggestions */
        .quick-suggestions {
            padding: 0 2rem 1rem;
            display: flex;
            gap: 0.75rem;
            overflow-x: auto;
        }

        .suggestion-btn {
            background: rgba(67, 97, 238, 0.2);
            border: 1px solid rgba(67, 97, 238, 0.4);
            color: var(--text-light);
            padding: 0.75rem 1.25rem;
            border-radius: var(--radius);
            font-size: 0.9rem;
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .suggestion-btn:hover {
            background: rgba(67, 97, 238, 0.3);
            transform: translateY(-2px);
        }

        /* Input Area */
        .input-container {
            padding: 1.5rem 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(30, 41, 59, 0.8);
        }

        .input-wrapper {
            display: flex;
            align-items: flex-end;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .input-box {
            flex: 1;
            position: relative;
        }

        textarea#message-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.07);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            padding: 1rem 1rem 3rem;
            color: var(--text-light);
            font-size: 1rem;
            resize: none;
            transition: var(--transition);
            min-height: 60px;
            max-height: 200px;
        }

        textarea#message-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .input-hints {
            position: absolute;
            bottom: 0.75rem;
            left: 1rem;
            right: 1rem;
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            opacity: 0.6;
            pointer-events: none;
        }

        .input-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            color: var(--text-light);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .input-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .send-btn {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .send-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
        }

        .ai-features {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
        }

        .feature-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
            opacity: 0.9;
        }

        .feature-toggle input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        /* Right Panel */
        .right-panel {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(10px);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            overflow-y: auto;
        }

        .panel-section h3 {
            font-size: 0.9rem;
            color: var(--text-light);
            opacity: 0.7;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .insight-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .insight-header {
            background: rgba(67, 97, 238, 0.2);
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .insight-content {
            padding: 1rem;
        }

        .insight-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .insight-item:last-child {
            border-bottom: none;
        }

        /* Code Tools */
        .code-tools {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .code-tools select {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            padding: 0.5rem;
            color: var(--text-light);
        }

        .tool-btn {
            background: rgba(67, 97, 238, 0.2);
            border: 1px solid rgba(67, 97, 238, 0.4);
            color: var(--text-light);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tool-btn:hover {
            background: rgba(67, 97, 238, 0.3);
        }

        .code-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            padding: 1rem;
            color: var(--text-light);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            resize: vertical;
            min-height: 120px;
        }

        .code-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Progress Ring */
        .progress-ring {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 1rem;
        }

        .progress-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.1);
            stroke-width: 6;
        }

        .progress-bar {
            fill: none;
            stroke: var(--primary);
            stroke-width: 6;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dashoffset 0.5s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .progress-percent {
            font-size: 1.5rem;
            font-weight: 600;
            display: block;
        }

        .progress-label {
            font-size: 0.8rem;
            opacity: 0.7;
            display: block;
        }

        .learning-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 1rem;
        }

        .stat {
            text-align: center;
        }

        .stat i {
            font-size: 1.5rem;
            color: var(--secondary);
            display: block;
            margin-bottom: 0.5rem;
        }

        .stat span {
            font-size: 1.25rem;
            font-weight: 600;
            display: block;
        }

        .stat small {
            font-size: 0.75rem;
            opacity: 0.7;
            display: block;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--dark-card);
            border-radius: var(--radius);
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .close-modal {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .close-modal:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .help-section {
            margin-bottom: 2rem;
        }

        .help-section h4 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: var(--secondary);
        }

        .help-section p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .help-section ul {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .help-section li {
            margin: 0.5rem 0;
            line-height: 1.5;
        }

        /* Animations */
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.5);
                opacity: 0.5;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-8px);
            }
        }

        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(67, 97, 238, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(67, 97, 238, 0.7);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 240px 1fr;
            }
            .right-panel {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr;
            }
            .sidebar {
                display: none;
            }
            .sidebar.active {
                display: flex;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 100;
            }
            .chat-header {
                padding: 1rem;
            }
            .messages-container {
                padding: 1rem;
            }
            .input-container {
                padding: 1rem;
            }
            .quick-suggestions {
                padding: 0 1rem 0.5rem;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Code Syntax Highlighting */
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin: 0.5rem 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .code-keyword { color: #ff79c6; }
        .code-function { color: #50fa7b; }
        .code-string { color: #f1fa8c; }
        .code-number { color: #bd93f9; }
        .code-comment { color: #6272a4; }
        .code-operator { color: #ffb86c; }

        /* Message Animation Classes */
        .slide-in-left {
            animation: slideInLeft 0.3s ease-out;
        }

        .slide-in-right {
            animation: slideInRight 0.3s ease-out;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
</head>
<body>
    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="ai-avatar">
                    <i class="fas fa-robot"></i>
                    <div class="ai-status active"></div>
                </div>
                <h1>AI Assistant</h1>
                <p>Your intelligent companion</p>
            </div>

            <!-- Chat History -->
            <div class="chat-history">
                <h3><i class="fas fa-history"></i> Recent Chats</h3>
                <div class="history-list" id="history-list">
                    <!-- History items will be added dynamically -->
                </div>
            </div>

            <!-- AI Capabilities -->
            <div class="ai-capabilities">
                <h3><i class="fas fa-bolt"></i> Capabilities</h3>
                <div class="capability-tags">
                    <span class="tag"><i class="fas fa-brain"></i> Machine Learning</span>
                    <span class="tag"><i class="fas fa-language"></i> NLP</span>
                    <span class="tag"><i class="fas fa-code"></i> Programming</span>
                    <span class="tag"><i class="fas fa-calculator"></i> Math</span>
                    <span class="tag"><i class="fas fa-book"></i> Learning</span>
                    <span class="tag"><i class="fas fa-chart-line"></i> Analysis</span>
                </div>
            </div>

            <!-- Settings -->
            <div class="settings">
                <h3><i class="fas fa-cog"></i> Settings</h3>
                <div class="setting-item">
                    <span>AI Personality:</span>
                    <select id="ai-personality">
                        <option value="assistant">Assistant</option>
                        <option value="teacher">Teacher</option>
                        <option value="friend">Friendly</option>
                        <option value="professional">Professional</option>
                    </select>
                </div>
                <div class="setting-item">
                    <span>Response Speed:</span>
                    <input type="range" id="response-speed" min="1" max="10" value="5">
                </div>
                <div class="setting-item">
                    <span>Voice Response:</span>
                    <label class="switch">
                        <input type="checkbox" id="voice-toggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="main-chat">
            <!-- Chat Header -->
            <header class="chat-header">
                <div class="header-left">
                    <button class="icon-btn" id="menu-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="typing-indicator" id="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <h2>AI Chat Assistant</h2>
                </div>
                <div class="header-right">
                    <button class="icon-btn" id="clear-chat" title="Clear Chat">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="icon-btn" id="export-chat" title="Export Chat">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="icon-btn" id="help-btn" title="Help">
                        <i class="fas fa-question-circle"></i>
                    </button>
                </div>
            </header>

            <!-- Messages Container -->
            <div class="messages-container" id="messages-container">
                <!-- Messages will be added here dynamically -->
            </div>

            <!-- Quick Suggestions -->
            <div class="quick-suggestions" id="quick-suggestions">
                <button class="suggestion-btn" data-prompt="Explain machine learning in simple terms">
                    <i class="fas fa-brain"></i> Explain ML
                </button>
                <button class="suggestion-btn" data-prompt="Write a Python function to calculate factorial">
                    <i class="fab fa-python"></i> Python Code
                </button>
                <button class="suggestion-btn" data-prompt="Help me brainstorm business ideas">
                    <i class="fas fa-lightbulb"></i> Brainstorm
                </button>
                <button class="suggestion-btn" data-prompt="What's the weather like today?">
                    <i class="fas fa-sun"></i> Weather
                </button>
            </div>

            <!-- Input Area -->
            <div class="input-container">
                <div class="input-wrapper">
                    <button class="input-btn" id="attach-btn" title="Attach File">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <div class="input-box">
                        <textarea 
                            id="message-input" 
                            placeholder="Type your message here... (Shift + Enter for new line)"
                            rows="1"
                            autofocus
                        ></textarea>
                        <div class="input-hints">
                            <span class="hint"><i class="fas fa-lightbulb"></i> Try: "Explain quantum computing"</span>
                            <span class="hint"><i class="fas fa-code"></i> For code: "Write a function to..."</span>
                        </div>
                    </div>
                    <div class="input-actions">
                        <button class="input-btn" id="voice-btn" title="Voice Input">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="send-btn" id="send-btn" title="Send Message">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
                
                <!-- AI Features Toggle -->
                <div class="ai-features">
                    <div class="feature-toggle">
                        <input type="checkbox" id="context-aware" checked>
                        <label for="context-aware">Context-aware responses</label>
                    </div>
                    <div class="feature-toggle">
                        <input type="checkbox" id="creative-mode" checked>
                        <label for="creative-mode">Creative mode</label>
                    </div>
                </div>
            </div>
        </main>

        <!-- Right Panel - AI Insights -->
        <aside class="right-panel">
            <div class="panel-section">
                <h3><i class="fas fa-chart-line"></i> AI Insights</h3>
                <div class="insight-card">
                    <div class="insight-header">
                        <i class="fas fa-comments"></i>
                        <span>Conversation Analysis</span>
                    </div>
                    <div class="insight-content">
                        <div class="insight-item">
                            <span>Messages Sent:</span>
                            <span id="message-count">0</span>
                        </div>
                        <div class="insight-item">
                            <span>Topics Discussed:</span>
                            <span id="topic-count">0</span>
                        </div>
                        <div class="insight-item">
                            <span>AI Response Time:</span>
                            <span id="avg-response">0s</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-section">
                <h3><i class="fas fa-code"></i> Code Formatter</h3>
                <div class="code-tools">
                    <select id="code-language">
                        <option value="python">Python</option>
                        <option value="javascript">JavaScript</option>
                        <option value="html">HTML</option>
                        <option value="css">CSS</option>
                        <option value="java">Java</option>
                        <option value="cpp">C++</option>
                    </select>
                    <button class="tool-btn" id="format-code">
                        <i class="fas fa-magic"></i> Format
                    </button>
                </div>
                <textarea class="code-input" placeholder="Paste code here to format..." rows="8"></textarea>
            </div>

            <div class="panel-section">
                <h3><i class="fas fa-history"></i> Learning Progress</h3>
                <div class="progress-ring">
                    <svg width="120" height="120">
                        <circle class="progress-bg" cx="60" cy="60" r="50"></circle>
                        <circle class="progress-bar" cx="60" cy="60" r="50" stroke-dasharray="314" stroke-dashoffset="220"></circle>
                    </svg>
                    <div class="progress-text">
                        <span class="progress-percent">70%</span>
                        <span class="progress-label">Learning</span>
                    </div>
                </div>
                <div class="learning-stats">
                    <div class="stat">
                        <i class="fas fa-book"></i>
                        <span id="concepts-learned">12</span>
                        <small>Concepts</small>
                    </div>
                    <div class="stat">
                        <i class="fas fa-check-circle"></i>
                        <span id="mastered-concepts">8</span>
                        <small>Mastered</small>
                    </div>
                    <div class="stat">
                        <i class="fas fa-clock"></i>
                        <span id="chat-duration">0</span>
                        <small>Minutes</small>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Help Modal -->
    <div class="modal" id="help-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-question-circle"></i> AI Assistant Help</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h4><i class="fas fa-comment"></i> How to Use</h4>
                    <p>Type your questions or requests in the input box. The AI will respond based on your query.</p>
                    <p>Use quick action buttons for common requests.</p>
                </div>
                <div class="help-section">
                    <h4><i class="fas fa-code"></i> Code Features</h4>
                    <ul>
                        <li>Ask for code examples in any language</li>
                        <li>Request code explanations</li>
                        <li>Debug existing code</li>
                        <li>Format code using the right panel</li>
                    </ul>
                </div>
                <div class="help-section">
                    <h4><i class="fas fa-cog"></i> Settings</h4>
                    <ul>
                        <li>Change AI personality for different response styles</li>
                        <li>Adjust response speed for faster/slower replies</li>
                        <li>Enable voice responses for auditory feedback</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // AI Knowledge Base and Response System
        class AIChatbot {
            constructor() {
                this.conversationHistory = [];
                this.learningProgress = 0;
                this.startTime = Date.now();
                this.messageCount = 0;
                this.topics = new Set();
                
                // AI Knowledge Base
                this.knowledgeBase = {
                    greetings: {
                        patterns: ['hello', 'hi', 'hey', 'greetings', 'good morning', 'good afternoon', 'good evening'],
                        responses: [
                            "Hello! ðŸ‘‹ How can I assist you today?",
                            "Hi there! I'm your AI assistant. What would you like to know?",
                            "Greetings! I'm here to help with any questions you have.",
                            "Hello! Ready to explore some interesting topics?"
                        ]
                    },
                    farewell: {
                        patterns: ['bye', 'goodbye', 'see you', 'farewell', 'exit', 'quit'],
                        responses: [
                            "Goodbye! Feel free to come back anytime. ðŸ‘‹",
                            "See you later! It was great chatting with you!",
                            "Farewell! Don't hesitate to return if you have more questions.",
                            "Goodbye! Keep learning and exploring! ðŸš€"
                        ]
                    },
                    gratitude: {
                        patterns: ['thanks', 'thank you', 'appreciate', 'grateful'],
                        responses: [
                            "You're welcome! ðŸ˜Š I'm glad I could help.",
                            "Happy to assist! Let me know if you need anything else.",
                            "You're very welcome! That's what I'm here for.",
                            "My pleasure! Don't hesitate to ask if you have more questions."
                        ]
                    },
                    capabilities: {
                        patterns: ['what can you do', 'capabilities', 'features', 'help'],
                        responses: [
                            "I can help with:\nâ€¢ Answering questions and explaining concepts\nâ€¢ Writing and debugging code\nâ€¢ Creative writing and brainstorming\nâ€¢ Math and logical reasoning\nâ€¢ Learning new topics\nâ€¢ Data analysis and visualization\nâ€¢ And much more!",
                            "As an AI assistant, I can:\nâ€¢ Provide information and explanations\nâ€¢ Generate code in multiple languages\nâ€¢ Help with problem-solving\nâ€¢ Assist with learning and research\nâ€¢ Analyze and process information\nâ€¢ Make recommendations and suggestions"
                        ]
                    },
                    coding: {
                        patterns: ['code', 'programming', 'python', 'javascript', 'java', 'html', 'css', 'function', 'algorithm'],
                        responses: [
                            "I can help with programming! What language or concept would you like to explore?",
                            "Ready to code! I can write, explain, or debug programs in various languages.",
                            "Programming assistance activated! Tell me what you need help with."
                        ]
                    },
                    learning: {
                        patterns: ['learn', 'study', 'education', 'teach', 'explain', 'understand'],
                        responses: [
                            "I'd love to help you learn! What topic or concept would you like to understand better?",
                            "Learning mode activated! I can explain concepts in simple terms with examples.",
                            "Ready to help you learn! I can break down complex topics into easy-to-understand parts."
                        ]
                    },
                    creative: {
                        patterns: ['creative', 'write', 'story', 'poem', 'brainstorm', 'ideas'],
                        responses: [
                            "Creative mode activated! I can help with writing, brainstorming, and generating ideas.",
                            "Ready to get creative! I can write stories, poems, or help brainstorm ideas.",
                            "Let's create something amazing! What kind of creative project are you working on?"
                        ]
                    }
                };
                
                // Predefined responses for common questions
                this.commonResponses = {
                    "what is machine learning": "Machine learning is a subset of artificial intelligence that enables computers to learn from data and improve their performance on tasks without being explicitly programmed. It uses algorithms to identify patterns in data and make predictions or decisions.",
                    "what is python": "Python is a high-level, interpreted programming language known for its simplicity and readability. It's widely used in web development, data science, artificial intelligence, scientific computing, and automation.",
                    "what is artificial intelligence": "Artificial Intelligence (AI) is the simulation of human intelligence in machines that are programmed to think and learn like humans. It includes capabilities like reasoning, learning, problem-solving, perception, and language understanding.",
                    "how to learn programming": "Start with these steps:\n1. Choose a beginner-friendly language (Python is great)\n2. Learn basic syntax and concepts\n3. Practice with small projects\n4. Learn data structures and algorithms\n5. Build real-world projects\n6. Join coding communities\n7. Never stop learning and practicing!",
                    "what is your name": "I'm your AI Assistant! I don't have a specific name, but you can call me whatever you'd like. I'm here to help you with your questions and tasks.",
                    "who created you": "I was created as a demonstration of AI capabilities using HTML, CSS, and JavaScript. I'm designed to showcase how AI chatbots can understand and respond to natural language.",
                    "what is the weather": "I don't have real-time weather data, but I can help you understand weather concepts or write code to fetch weather data from APIs!"
                };
                
                // Personality templates
                this.personalities = {
                    assistant: {
                        tone: "professional and helpful",
                        greetings: ["Hello!", "Hi there!", "Greetings!"],
                        closings: ["Let me know if you need anything else.", "Happy to help!", "Is there anything more I can assist with?"]
                    },
                    teacher: {
                        tone: "educational and explanatory",
                        greetings: ["Welcome to our learning session!", "Ready to learn something new?", "Let's explore this topic together!"],
                        closings: ["Keep learning and exploring!", "Knowledge is power!", "Remember to practice what you've learned."]
                    },
                    friend: {
                        tone: "casual and friendly",
                        greetings: ["Hey there! ðŸ˜Š", "What's up?", "How's it going?"],
                        closings: ["Talk to you later!", "Catch you soon!", "Take care! ðŸ˜Š"]
                    },
                    professional: {
                        tone: "formal and precise",
                        greetings: ["Good day.", "Greetings.", "Hello."],
                        closings: ["Please let me know if you require further assistance.", "I remain at your service.", "End of communication."]
                    }
                };
                
                this.currentPersonality = 'assistant';
            }
            
            // Generate AI response
            async generateResponse(userMessage, context = {}) {
                const startTime = Date.now();
                userMessage = userMessage.toLowerCase().trim();
                
                // Update conversation history
                this.conversationHistory.push({
                    role: 'user',
                    content: userMessage,
                    timestamp: new Date().toISOString()
                });
                
                // Check for exact matches in common responses
                for (const [question, answer] of Object.entries(this.commonResponses)) {
                    if (userMessage.includes(question) || question.includes(userMessage)) {
                        return this.formatResponse(answer, startTime);
                    }
                }
                
                // Check knowledge base patterns
                for (const [category, data] of Object.entries(this.knowledgeBase)) {
                    for (const pattern of data.patterns) {
                        if (userMessage.includes(pattern)) {
                            const response = data.responses[Math.floor(Math.random() * data.responses.length)];
                            return this.formatResponse(response, startTime);
                        }
                    }
                }
                
                // Generate dynamic response based on message content
                return this.generateDynamicResponse(userMessage, startTime);
            }
            
            // Generate dynamic response
            generateDynamicResponse(userMessage, startTime) {
                const words = userMessage.split(' ');
                const containsQuestionWord = userMessage.includes('?') || 
                    userMessage.includes('what') || 
                    userMessage.includes('how') || 
                    userMessage.includes('why') || 
                    userMessage.includes('when') || 
                    userMessage.includes('where') || 
                    userMessage.includes('explain');
                
                // Extract topic from message
                let topic = this.extractTopic(userMessage);
                if (topic) {
                    this.topics.add(topic);
                }
                
                // Check for code-related requests
                if (userMessage.includes('code') || userMessage.includes('program') || 
                    userMessage.includes('function') || userMessage.includes('algorithm')) {
                    return this.generateCodeResponse(userMessage, startTime);
                }
                
                // Check for math-related requests
                if (userMessage.includes('math') || userMessage.includes('calculate') || 
                    userMessage.includes('solve') || userMessage.includes('equation')) {
                    return this.generateMathResponse(userMessage, startTime);
                }
                
                // Default intelligent response
                if (containsQuestionWord) {
                    const responses = [
                        `That's an interesting question about ${topic || 'this topic'}. Based on my knowledge, I can tell you that this is a complex subject with many aspects to explore.`,
                        `Great question! ${topic ? `Regarding ${topic}, ` : ''}I'd be happy to provide you with detailed information and explanations.`,
                        `I understand you're asking about ${topic || 'this topic'}. Let me provide you with a comprehensive explanation.`,
                        `Excellent question! This gives us a chance to explore ${topic || 'an interesting topic'} in detail.`
                    ];
                    return this.formatResponse(
                        responses[Math.floor(Math.random() * responses.length)], 
                        startTime
                    );
                }
                
                // Generic response
                const genericResponses = [
                    "I understand what you're saying. Would you like me to provide more details or help you explore this further?",
                    "That's interesting! I can help you learn more about this topic or assist you with related tasks.",
                    "Thanks for sharing! I'm here to help you with this or any other questions you might have.",
                    "I appreciate your message. How can I assist you further with this topic?"
                ];
                
                return this.formatResponse(
                    genericResponses[Math.floor(Math.random() * genericResponses.length)], 
                    startTime
                );
            }
            
            // Generate code response
            generateCodeResponse(userMessage, startTime) {
                const language = this.detectProgrammingLanguage(userMessage);
                let codeExample = '';
                let explanation = '';
                
                switch(language) {
                    case 'python':
                        codeExample = `def hello_world():\n    """A simple Python function"""\n    return "Hello, World!"\n\n# Example usage\nprint(hello_world())`;
                        explanation = "This is a basic Python function. Python is known for its clean and readable syntax.";
                        break;
                    case 'javascript':
                        codeExample = `function helloWorld() {\n    // A simple JavaScript function\n    return "Hello, World!";\n}\n\n// Example usage\nconsole.log(helloWorld());`;
                        explanation = "This is a basic JavaScript function. JavaScript is primarily used for web development.";
                        break;
                    case 'html':
                        codeExample = `<!DOCTYPE html>\n<html>\n<head>\n    <title>Simple HTML</title>\n</head>\n<body>\n    <h1>Hello, World!</h1>\n    <p>This is a basic HTML page.</p>\n</body>\n</html>`;
                        explanation = "This is a basic HTML structure. HTML defines the content of web pages.";
                        break;
                    default:
                        codeExample = `// Here's a sample function\nfunction example() {\n    // Your code here\n    return "Hello, World!";\n}`;
                        explanation = "I can help you with code in various programming languages. Just let me know what you need!";
                }
                
                const response = `Here's some ${language} code for you:\n\n\`\`\`${language}\n${codeExample}\n\`\`\`\n\n${explanation}\n\nI can also help you with debugging, optimization, or learning ${language} concepts.`;
                return this.formatResponse(response, startTime);
            }
            
            // Generate math response
            generateMathResponse(userMessage, startTime) {
                // Try to extract numbers from the message
                const numbers = userMessage.match(/\d+/g)?.map(Number) || [5, 3];
                
                const mathExamples = [
                    `Let me help you with that math problem!\n\nExample calculation:\n${numbers[0] || 5} + ${numbers[1] || 3} = ${(numbers[0] || 5) + (numbers[1] || 3)}`,
                    `I can assist with mathematical concepts! Here's a quick example:\n\nSquare root of ${numbers[0] || 16} = ${Math.sqrt(numbers[0] || 16).toFixed(2)}`,
                    `Math is fascinating! Let me explain:\n\nThe area of a circle with radius ${numbers[0] || 5} is Ï€ Ã— rÂ² = ${(Math.PI * (numbers[0] || 5) * (numbers[0] || 5)).toFixed(2)}`,
                    `Need help with math? Here's something interesting:\n\n${numbers[0] || 10} factorial (${numbers[0] || 10}!) = ${this.factorial(numbers[0] || 10)}`
                ];
                
                return this.formatResponse(
                    mathExamples[Math.floor(Math.random() * mathExamples.length)], 
                    startTime
                );
            }
            
            // Helper methods
            extractTopic(message) {
                const commonTopics = ['machine learning', 'ai', 'python', 'javascript', 'programming', 
                                    'math', 'science', 'technology', 'learning', 'code', 'web development'];
                for (const topic of commonTopics) {
                    if (message.includes(topic)) {
                        return topic;
                    }
                }
                return null;
            }
            
            detectProgrammingLanguage(message) {
                if (message.includes('python')) return 'python';
                if (message.includes('javascript') || message.includes('js')) return 'javascript';
                if (message.includes('java')) return 'java';
                if (message.includes('html')) return 'html';
                if (message.includes('css')) return 'css';
                if (message.includes('c++') || message.includes('cpp')) return 'cpp';
                return 'python'; // default
            }
            
            factorial(n) {
                if (n <= 1) return 1;
                return n * this.factorial(n - 1);
            }
            
            formatResponse(response, startTime) {
                const responseTime = Date.now() - startTime;
                
                // Add personality-based greeting/closing
                const personality = this.personalities[this.currentPersonality];
                const greeting = personality.greetings[Math.floor(Math.random() * personality.greetings.length)];
                const closing = personality.closings[Math.floor(Math.random() * personality.closings.length)];
                
                // Format code blocks
                const formattedResponse = response.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
                    return `<div class="code-block">${this.highlightCode(code, lang)}</div>`;
                });
                
                // Add to conversation history
                this.conversationHistory.push({
                    role: 'assistant',
                    content: response,
                    timestamp: new Date().toISOString(),
                    responseTime: responseTime
                });
                
                this.messageCount++;
                
                return {
                    content: `${greeting}\n\n${formattedResponse}\n\n${closing}`,
                    responseTime: responseTime,
                    containsCode: response.includes('```')
                };
            }
            
            highlightCode(code, language = '') {
                // Simple syntax highlighting
                const keywords = {
                    python: ['def', 'class', 'return', 'if', 'else', 'elif', 'for', 'while', 'import', 'from', 'as', 'try', 'except', 'finally', 'with', 'lambda'],
                    javascript: ['function', 'const', 'let', 'var', 'return', 'if', 'else', 'for', 'while', 'try', 'catch', 'finally', 'class', 'import', 'export', 'async', 'await'],
                    java: ['public', 'private', 'protected', 'class', 'void', 'static', 'return', 'if', 'else', 'for', 'while', 'try', 'catch', 'finally', 'new'],
                    html: ['<!DOCTYPE', '<html', '<head', '<body', '<div', '<span', '<p', '<h1', '<h2', '<h3', '<a', '<img', '<script', '<style'],
                    css: ['.', '#', '{', '}', ':', ';', 'margin', 'padding', 'color', 'background', 'font', 'display', 'position']
                };
                
                let highlighted = code;
                
                // Highlight keywords
                if (keywords[language]) {
                    keywords[language].forEach(keyword => {
                        const regex = new RegExp(`\\b${keyword}\\b`, 'g');
                        highlighted = highlighted.replace(regex, `<span class="code-keyword">${keyword}</span>`);
                    });
                }
                
                // Highlight strings
                highlighted = highlighted.replace(/(".*?"|'.*?')/g, '<span class="code-string">$1</span>');
                
                // Highlight numbers
                highlighted = highlighted.replace(/\b(\d+)\b/g, '<span class="code-number">$1</span>');
                
                // Highlight comments
                highlighted = highlighted.replace(/\/\/.*|\/\*[\s\S]*?\*\//g, '<span class="code-comment">$&</span>');
                
                return highlighted;
            }
            
            setPersonality(personality) {
                if (this.personalities[personality]) {
                    this.currentPersonality = personality;
                    return `Switched to ${personality} mode!`;
                }
                return "Personality not recognized. Available options: assistant, teacher, friend, professional.";
            }
            
            getConversationStats() {
                const duration = Math.floor((Date.now() - this.startTime) / 60000); // minutes
                return {
                    messageCount: this.messageCount,
                    topicCount: this.topics.size,
                    conversationDuration: duration,
                    averageResponseTime: this.conversationHistory
                        .filter(msg => msg.role === 'assistant' && msg.responseTime)
                        .reduce((sum, msg) => sum + msg.responseTime, 0) / this.messageCount || 0
                };
            }
            
            clearHistory() {
                this.conversationHistory = [];
                this.messageCount = 0;
                this.topics.clear();
                this.startTime = Date.now();
            }
            
            exportConversation() {
                const exportData = {
                    conversation: this.conversationHistory,
                    stats: this.getConversationStats(),
                    timestamp: new Date().toISOString()
                };
                return JSON.stringify(exportData, null, 2);
            }
        }

        // Main Application
        class ChatbotApp {
            constructor() {
                this.ai = new AIChatbot();
                this.initializeElements();
                this.setupEventListeners();
                this.loadWelcomeMessage();
                this.startChatDurationTimer();
            }
            
            initializeElements() {
                this.elements = {
                    messageInput: document.getElementById('message-input'),
                    sendBtn: document.getElementById('send-btn'),
                    messagesContainer: document.getElementById('messages-container'),
                    typingIndicator: document.getElementById('typing-indicator'),
                    clearChatBtn: document.getElementById('clear-chat'),
                    helpBtn: document.getElementById('help-btn'),
                    helpModal: document.getElementById('help-modal'),
                    closeModalBtn: document.querySelector('.close-modal'),
                    suggestionBtns: document.querySelectorAll('.suggestion-btn'),
                    quickActions: document.querySelectorAll('.quick-action'),
                    personalitySelect: document.getElementById('ai-personality'),
                    menuToggle: document.getElementById('menu-toggle'),
                    sidebar: document.querySelector('.sidebar'),
                    messageCount: document.getElementById('message-count'),
                    topicCount: document.getElementById('topic-count'),
                    avgResponse: document.getElementById('avg-response'),
                    conceptsLearned: document.getElementById('concepts-learned'),
                    masteredConcepts: document.getElementById('mastered-concepts'),
                    chatDuration: document.getElementById('chat-duration'),
                    formatCodeBtn: document.getElementById('format-code'),
                    codeInput: document.querySelector('.code-input'),
                    codeLanguage: document.getElementById('code-language'),
                    voiceToggle: document.getElementById('voice-toggle'),
                    responseSpeed: document.getElementById('response-speed'),
                    contextAware: document.getElementById('context-aware'),
                    creativeMode: document.getElementById('creative-mode')
                };
            }
            
            setupEventListeners() {
                // Send message on button click
                this.elements.sendBtn.addEventListener('click', () => this.sendMessage());
                
                // Send message on Enter key (Shift+Enter for new line)
                this.elements.messageInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });
                
                // Auto-resize textarea
                this.elements.messageInput.addEventListener('input', () => {
                    this.resizeTextarea();
                });
                
                // Clear chat
                this.elements.clearChatBtn.addEventListener('click', () => this.clearChat());
                
                // Help modal
                this.elements.helpBtn.addEventListener('click', () => this.showHelpModal());
                this.elements.closeModalBtn.addEventListener('click', () => this.hideHelpModal());
                this.elements.helpModal.addEventListener('click', (e) => {
                    if (e.target === this.elements.helpModal) {
                        this.hideHelpModal();
                    }
                });
                
                // Quick suggestions
                this.elements.suggestionBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const prompt = e.target.dataset.prompt;
                        this.elements.messageInput.value = prompt;
                        this.resizeTextarea();
                        this.elements.messageInput.focus();
                    });
                });
                
                // Quick actions
                this.elements.quickActions.forEach(action => {
                    action.addEventListener('click', (e) => {
                        const actionType = e.target.dataset.action;
                        this.handleQuickAction(actionType);
                    });
                });
                
                // Personality change
                this.elements.personalitySelect.addEventListener('change', (e) => {
                    const personality = e.target.value;
                    const response = this.ai.setPersonality(personality);
                    this.addMessage('system', `AI personality changed to ${personality}. ${response}`);
                });
                
                // Menu toggle for mobile
                this.elements.menuToggle.addEventListener('click', () => {
                    this.elements.sidebar.classList.toggle('active');
                });
                
                // Code formatting
                this.elements.formatCodeBtn.addEventListener('click', () => this.formatCode());
                
                // Voice toggle
                this.elements.voiceToggle.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        this.setupVoiceRecognition();
                    }
                });
                
                // Update stats periodically
                setInterval(() => this.updateStats(), 5000);
            }
            
            async sendMessage() {
                const message = this.elements.messageInput.value.trim();
                if (!message) return;
                
                // Add user message to chat
                this.addMessage('user', message);
                
                // Clear input
                this.elements.messageInput.value = '';
                this.resizeTextarea();
                
                // Show typing indicator
                this.showTypingIndicator();
                
                // Simulate AI thinking time
                const responseSpeed = parseInt(this.elements.responseSpeed.value);
                const thinkingTime = (11 - responseSpeed) * 500; // 0.5-5 seconds based on speed
                
                setTimeout(async () => {
                    // Get AI response
                    const context = {
                        creativeMode: this.elements.creativeMode.checked,
                        contextAware: this.elements.contextAware.checked
                    };
                    
                    const response = await this.ai.generateResponse(message, context);
                    
                    // Hide typing indicator
                    this.hideTypingIndicator();
                    
                    // Add AI response to chat
                    this.addMessage('ai', response.content, response.containsCode);
                    
                    // Update stats
                    this.updateStats();
                    
                    // Scroll to bottom
                    this.scrollToBottom();
                    
                    // Speak response if voice is enabled
                    if (this.elements.voiceToggle.checked) {
                        this.speakResponse(response.content);
                    }
                }, thinkingTime);
            }
            
            addMessage(sender, content, containsCode = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}-message animate__animated ${
                    sender === 'user' ? 'slide-in-right' : 'slide-in-left'
                }`;
                
                const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                messageDiv.innerHTML = `
                    <div class="message-avatar">
                        <i class="fas fa-${sender === 'user' ? 'user' : 'robot'}"></i>
                    </div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="sender">${sender === 'user' ? 'You' : 'AI Assistant'}</span>
                            <span class="time">${time}</span>
                        </div>
                        <div class="message-text">${content}</div>
                    </div>
                `;
                
                this.elements.messagesContainer.appendChild(messageDiv);
                this.scrollToBottom();
            }
            
            showTypingIndicator() {
                this.elements.typingIndicator.classList.add('active');
            }
            
            hideTypingIndicator() {
                this.elements.typingIndicator.classList.remove('active');
            }
            
            resizeTextarea() {
                const textarea = this.elements.messageInput;
                textarea.style.height = 'auto';
                textarea.style.height = Math.min(textarea.scrollHeight, 200) + 'px';
            }
            
            scrollToBottom() {
                this.elements.messagesContainer.scrollTop = this.elements.messagesContainer.scrollHeight;
            }
            
            loadWelcomeMessage() {
                const welcomeMessage = `
                    Hello! ðŸ‘‹ I'm your AI-powered assistant. I can help you with:
                    <ul>
                        <li>Answering questions and explaining concepts</li>
                        <li>Writing and debugging code</li>
                        <li>Creative writing and brainstorming</li>
                        <li>Math and logical reasoning</li>
                        <li>Learning new topics</li>
                    </ul>
                    What would you like to explore today?
                `;
                
                this.addMessage('ai', welcomeMessage);
            }
            
            handleQuickAction(actionType) {
                let prompt = '';
                switch(actionType) {
                    case 'code-help':
                        prompt = "Can you help me write a Python function to sort a list?";
                        break;
                    case 'explain':
                        prompt = "Explain neural networks in simple terms";
                        break;
                    case 'creative':
                        prompt = "Help me write a short story about artificial intelligence";
                        break;
                    case 'math':
                        prompt = "Can you solve this equation: 2x + 5 = 15?";
                        break;
                }
                
                this.elements.messageInput.value = prompt;
                this.resizeTextarea();
                this.elements.messageInput.focus();
            }
            
            clearChat() {
                if (confirm('Are you sure you want to clear the chat?')) {
                    this.elements.messagesContainer.innerHTML = '';
                    this.ai.clearHistory();
                    this.loadWelcomeMessage();
                    this.updateStats();
                }
            }
            
            showHelpModal() {
                this.elements.helpModal.style.display = 'flex';
            }
            
            hideHelpModal() {
                this.elements.helpModal.style.display = 'none';
            }
            
            updateStats() {
                const stats = this.ai.getConversationStats();
                this.elements.messageCount.textContent = stats.messageCount;
                this.elements.topicCount.textContent = stats.topicCount;
                this.elements.avgResponse.textContent = `${(stats.averageResponseTime / 1000).toFixed(1)}s`;
                this.elements.chatDuration.textContent = stats.conversationDuration;
                
                // Update progress ring
                const progress = Math.min(70 + stats.messageCount * 2, 100);
                const progressBar = document.querySelector('.progress-bar');
                const circumference = 314;
                const offset = circumference - (progress / 100) * circumference;
                progressBar.style.strokeDashoffset = offset;
                document.querySelector('.progress-percent').textContent = `${progress}%`;
                
                // Update learning stats
                this.elements.conceptsLearned.textContent = Math.min(12 + stats.messageCount, 50);
                this.elements.masteredConcepts.textContent = Math.min(8 + Math.floor(stats.messageCount / 3), 30);
            }
            
            startChatDurationTimer() {
                setInterval(() => {
                    const stats = this.ai.getConversationStats();
                    this.elements.chatDuration.textContent = stats.conversationDuration;
                }, 60000); // Update every minute
            }
            
            formatCode() {
                const code = this.elements.codeInput.value.trim();
                const language = this.elements.codeLanguage.value;
                
                if (!code) {
                    alert('Please paste some code to format.');
                    return;
                }
                
                // Simple code formatting
                let formattedCode = code;
                
                // Add indentation for code blocks
                if (language === 'python') {
                    formattedCode = formattedCode.replace(/^/gm, '    ');
                } else {
                    formattedCode = formattedCode.replace(/{/g, ' {\n    ')
                                                   .replace(/}/g, '\n}')
                                                   .replace(/;/g, ';\n    ');
                }
                
                this.elements.codeInput.value = formattedCode;
                
                // Show success message
                this.addMessage('system', `Code formatted in ${language.toUpperCase()}!`);
            }
            
            setupVoiceRecognition() {
                if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                    alert('Voice recognition is not supported in your browser.');
                    this.elements.voiceToggle.checked = false;
                    return;
                }
                
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                this.recognition = new SpeechRecognition();
                this.recognition.continuous = false;
                this.recognition.interimResults = false;
                
                this.recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    this.elements.messageInput.value = transcript;
                    this.resizeTextarea();
                };
                
                this.recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                };
                
                // Add voice button functionality
                const voiceBtn = document.getElementById('voice-btn');
                voiceBtn.addEventListener('click', () => {
                    if (this.elements.voiceToggle.checked) {
                        this.recognition.start();
                        voiceBtn.innerHTML = '<i class="fas fa-microphone-slash"></i>';
                        setTimeout(() => {
                            voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                        }, 3000);
                    }
                });
            }
            
            speakResponse(text) {
                if ('speechSynthesis' in window) {
                    // Remove code blocks and special characters
                    const cleanText = text.replace(/```[\s\S]*?```/g, '')
                                         .replace(/[`*_]/g, '')
                                         .substring(0, 200); // Limit length
                    
                    const utterance = new SpeechSynthesisUtterance(cleanText);
                    utterance.rate = 1.0;
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;
                    
                    speechSynthesis.speak(utterance);
                }
            }
        }

        // Initialize the application when page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.chatbotApp = new ChatbotApp();
        });
    </script>
</body>
</html>