<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Subordinating conjunctions</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: #f0f4fa;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 12px;
        }

        .quiz-card {
            background: white;
            width: 100%;
            max-width: 520px;
            border-radius: 36px;
            box-shadow: 0 20px 40px rgba(0, 15, 30, 0.15), 0 6px 12px rgba(0,0,0,0.05);
            padding: 24px 20px 32px;
            text-align: center;
            transition: all 0.2s ease;
        }

        h1 {
            font-size: 1.8rem;
            font-weight: 600;
            letter-spacing: -0.02em;
            color: #0f2b3d;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px 6px;
            margin-bottom: 10px;
        }

        h1 span {
            background: #dbeafe;
            padding: 4px 16px 6px 16px;
            font-size: 1.1rem;
            border-radius: 60px;
            color: #1e4a6b;
            font-weight: 500;
            white-space: nowrap;
        }

        .sub-name {
            background: #e6f0f9;
            color: #0b3954;
            font-weight: 500;
            font-size: 1.2rem;
            padding: 10px 18px;
            border-radius: 60px;
            margin-bottom: 18px;
            display: inline-block;
            border: 1px solid #b9d9f0;
        }

        .question-box {
            background: #f8fafc;
            border-radius: 32px;
            padding: 22px 14px 16px;
            margin-bottom: 16px;
            border: 2px solid #e2edf5;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.02);
        }

        .sentence {
            font-size: 1.8rem;
            line-height: 1.3;
            font-weight: 600;
            color: #0a2940;
            margin-bottom: 22px;
            word-break: break-word;
            padding: 0 4px;
        }

        .gap-highlight {
            display: inline-block;
            background: #ffefc0;
            padding: 0.1rem 0.8rem;
            border-radius: 30px;
            border: 2px dashed #c59b2e;
            font-weight: 700;
            color: #422d0b;
            margin: 0 4px;
            font-size: 2rem;
            line-height: 1.4;
            min-width: 90px;
            text-decoration: underline wavy #f2b42c 2px;
        }

        .options-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0 10px;
        }

        .option-btn {
            flex: 0 1 calc(50% - 10px);
            min-width: 120px;
            background: white;
            border: 2px solid #bfd9f0;
            border-radius: 60px;
            padding: 16px 8px;
            font-size: 1.5rem;
            font-weight: 600;
            color: #133c5c;
            box-shadow: 0 4px 0 #a0bccc;
            transition: all 0.07s ease-out;
            cursor: pointer;
            touch-action: manipulation;
            background: #f4f9ff;
            letter-spacing: 0.5px;
        }

        .option-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #a0bccc;
            background: #e3efff;
        }

        .option-btn.selected-correct {
            background: #c8f0d1;
            border-color: #1f7840;
            color: #0d441f;
            box-shadow: 0 4px 0 #1f7840;
        }

        .option-btn.selected-wrong {
            background: #ffe1de;
            border-color: #b13e3e;
            color: #631d1d;
            box-shadow: 0 4px 0 #942828;
            text-decoration: line-through 2px #a00;
        }

        .feedback-message {
            font-size: 1.3rem;
            min-height: 3.8rem;
            margin: 12px 0 10px;
            padding: 12px 16px;
            background: #eef2f6;
            border-radius: 40px;
            font-weight: 500;
            color: #1e445b;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            border: 1px solid #bed4e8;
        }

        .explanation-box {
            background: #e1f0fa;
            border-radius: 30px;
            padding: 16px 18px;
            margin: 10px 0 16px;
            font-size: 1.2rem;
            line-height: 1.4;
            color: #04364e;
            text-align: left;
            border-left: 6px solid #2a7faa;
            box-shadow: 0 2px 8px rgba(0,40,60,0.1);
            word-break: break-word;
        }

        .explanation-icon {
            font-size: 1.4rem;
            margin-right: 6px;
        }

        .next-button {
            background: #22668d;
            border: none;
            border-radius: 60px;
            padding: 18px 18px;
            width: 100%;
            font-size: 1.7rem;
            font-weight: 600;
            color: white;
            box-shadow: 0 6px 0 #0d3247;
            transition: 0.06s linear;
            cursor: pointer;
            touch-action: manipulation;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .next-button:active {
            transform: translateY(6px);
            box-shadow: 0 0 0 #0d3247;
        }

        .next-button:disabled {
            opacity: 0.5;
            transform: translateY(2px);
            box-shadow: 0 4px 0 #0d3247;
            pointer-events: none;
        }

        .counter-loop {
            font-size: 1.2rem;
            color: #577b96;
            margin: 22px 0 8px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 14px;
            background: #e1edf7;
            padding: 12px 16px;
            border-radius: 60px;
        }

        .loop-icon {
            font-size: 1.6rem;
        }

        .small-note {
            color: #456f89;
            background: #d7e7f3;
            border-radius: 30px;
            padding: 8px 14px;
            font-size: 1rem;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="quiz-card" role="main">
        <h1>
            üîÑ subordinator + explain
            <span>because ¬∑ although ¬∑ if ¬∑ when ¬∑ since</span>
        </h1>
        <div class="sub-name">infinite 20‚Äëquestion loop with explanations</div>

        <!-- question display area -->
        <div class="question-box">
            <div class="sentence" id="sentenceDisplay"></div>
            <div class="options-grid" id="optionsContainer"></div>
        </div>

        <!-- feedback & explanation area -->
        <div class="feedback-message" id="feedbackMsg">‚ú® choose a conjunction</div>
        <div class="explanation-box" id="explanationBox">
            <span class="explanation-icon">üìò</span> 
            <span id="explanationText">explanation will appear after you answer</span>
        </div>

        <button class="next-button" id="nextBtn" aria-label="next question">
            ‚è© next question <span style="font-size:1.9rem;">‚Ü∫</span>
        </button>

        <div class="counter-loop">
            <span class="loop-icon">‚àû</span>
            <span id="questionCounter">question 1 / 20  (cycle 1)</span>
            <span class="loop-icon">‚àû</span>
        </div>
        <div class="small-note">
            üí° tap answer ‚Üí read explanation ‚Üí next (infinite)
        </div>
    </div>

    <script>
        (function() {
            const CONJUNCTIONS = ['because', 'although', 'if', 'when', 'since'];

            // ----- 20 sentences with added explanation field -----
            const SENTENCE_POOL = [
                { text: "_____ it was raining, we went for a walk.", correct: "although",
                  explanation: "‚ÄòAlthough‚Äô introduces a contrast: raining ‚òî but still walked. ('Because' would mean rain caused the walk ‚Äî illogical.)" },
                { text: "I'll help you _____ you need me.", correct: "if",
                  explanation: "‚ÄòIf‚Äô sets a condition: help happens only when you need. ('When' suggests definite future, but here it's conditional.)" },
                { text: "She smiled _____ she saw the puppy.", correct: "when",
                  explanation: "‚ÄòWhen‚Äô links the moment she saw the puppy to her smile. (‚ÄòBecause‚Äô is possible but less precise for immediate reaction.)" },
                { text: "He was late _____ his car broke down.", correct: "because",
                  explanation: "‚ÄòBecause‚Äô gives the direct reason for lateness: car trouble. (Others don't fit cause‚Äëeffect.)" },
                { text: "_____ it's your birthday, I baked a cake.", correct: "since",
                  explanation: "‚ÄòSince‚Äô can mean 'because' or 'given that'. Here it gives the reason (birthday) for baking." },
                { text: "_____ he is rich, he lives in a small house.", correct: "although",
                  explanation: "‚ÄòAlthough‚Äô shows contrast: rich ‚â† small house. ('Because' would mean rich causes small house, which is odd.)" },
                { text: "We'll have a picnic _____ the weather is nice.", correct: "if",
                  explanation: "‚ÄòIf‚Äô expresses condition: picnic depends on nice weather. ('When' suggests it will definitely happen.)" },
                { text: "_____ I arrived, they had already left.", correct: "when",
                  explanation: "‚ÄòWhen‚Äô indicates the time of arrival, and the leaving happened before or at that moment." },
                { text: "I was worried _____ you didn't call.", correct: "because",
                  explanation: "‚ÄòBecause‚Äô explains the reason for worry: no call. (Cause & effect.)" },
                { text: "_____ you have finished, you can go home.", correct: "since",
                  explanation: "‚ÄòSince‚Äô here means 'because' or 'given that'. It gives the reason for permission." },
                { text: "_____ it was cold, she went swimming.", correct: "although",
                  explanation: "‚ÄòAlthough‚Äô marks contrast: cold temperature vs. swimming. ('Because' would be illogical.)" },
                { text: "You will pass _____ you study hard.", correct: "if",
                  explanation: "‚ÄòIf‚Äô sets the condition for passing: studying hard. (Not 'when' ‚Äî it's not certain.)" },
                { text: "_____ the phone rang, the baby woke up.", correct: "when",
                  explanation: "‚ÄòWhen‚Äô points to the moment the phone rang causing waking. (Time relationship.)" },
                { text: "He got hired _____ he had experience.", correct: "because",
                  explanation: "‚ÄòBecause‚Äô gives the reason for hiring: experience. (Clear cause.)" },
                { text: "_____ we have no money, we can't buy it.", correct: "since",
                  explanation: "‚ÄòSince‚Äô = because; introduces the reason (no money) for not buying." },
                { text: "_____ she practiced a lot, she lost the match.", correct: "although",
                  explanation: "‚ÄòAlthough‚Äô shows contrast: lots of practice ‚â† win. (Unexpected result.)" },
                { text: "_____ you see him, say hello for me.", correct: "if",
                  explanation: "‚ÄòIf‚Äô expresses a condition: only if you see him, then say hello. (Not certain.)" },
                { text: "_____ the movie ended, we went for coffee.", correct: "when",
                  explanation: "‚ÄòWhen‚Äô marks the time (after movie) we went for coffee. (Temporal sequence.)" },
                { text: "I trust him _____ he is honest.", correct: "because",
                  explanation: "‚ÄòBecause‚Äô gives the reason for trust: his honesty. (Direct cause.)" },
                { text: "_____ you're here, we can start the meeting.", correct: "since",
                  explanation: "‚ÄòSince‚Äô = because / given that; your arrival enables the meeting to start." }
            ];

            // ----- state -----
            let currentCycle = 1;
            let currentIndex = 0;                // 0..19
            let currentQuestion = null;
            let userAnswered = false;
            let selectedOption = null;
            let answerCorrect = false;

            // DOM elements
            const nextButton = document.getElementById('nextBtn');
            const sentenceDisplay = document.getElementById('sentenceDisplay');
            const optionsContainer = document.getElementById('optionsContainer');
            const feedbackMsg = document.getElementById('feedbackMsg');
            const explanationText = document.getElementById('explanationText');
            const explanationBox = document.getElementById('explanationBox');
            const questionCounterSpan = document.getElementById('questionCounter');

            function updateCounterDisplay() {
                let absoluteQ = (currentCycle - 1) * 20 + (currentIndex + 1);
                questionCounterSpan.innerText = `question ${currentIndex+1}/20  ¬∑  cycle ${currentCycle}  (total ${absoluteQ})`;
            }

            // load question based on currentIndex
            function loadQuestion() {
                currentQuestion = { ...SENTENCE_POOL[currentIndex] };

                // replace blank with styled span
                let rawSentence = currentQuestion.text;
                let displaySentence = rawSentence.replace('_____', '<span class="gap-highlight">______</span>');
                sentenceDisplay.innerHTML = displaySentence;

                // shuffle conj options for variety
                const shuffledConj = [...CONJUNCTIONS].sort(() => Math.random() - 0.5);

                optionsContainer.innerHTML = '';

                shuffledConj.forEach(conj => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.textContent = conj;
                    btn.dataset.conj = conj;

                    btn.addEventListener('click', (e) => {
                        if (userAnswered) return;  // ignore second click

                        const chosen = conj;
                        selectedOption = chosen;
                        const isCorrect = (chosen === currentQuestion.correct);
                        answerCorrect = isCorrect;

                        // disable all buttons & mark correct/wrong
                        const allBtns = document.querySelectorAll('.option-btn');
                        allBtns.forEach(b => {
                            b.disabled = true;
                            if (b.dataset.conj === currentQuestion.correct) {
                                b.classList.add('selected-correct');
                            } else if (b.dataset.conj === chosen && !isCorrect) {
                                b.classList.add('selected-wrong');
                            } else if (b.dataset.conj === chosen && isCorrect) {
                                b.classList.add('selected-correct');
                            }
                        });

                        // feedback
                        if (isCorrect) {
                            feedbackMsg.innerHTML = `‚úÖ perfect! "${chosen}" is correct.`;
                        } else {
                            feedbackMsg.innerHTML = `‚ùå "${chosen}" is not right. correct: ‚Äú${currentQuestion.correct}‚Äù.`;
                        }

                        // show explanation (always, even if correct ‚Äî for learning)
                        explanationText.innerText = currentQuestion.explanation;

                        userAnswered = true;
                    });

                    optionsContainer.appendChild(btn);
                });

                // reset answer state
                userAnswered = false;
                selectedOption = null;
                answerCorrect = false;
                feedbackMsg.innerHTML = '‚ú® choose a conjunction';
                // reset explanation to default (but keep previous explanation hidden? better to show placeholder)
                explanationText.innerText = 'explanation will appear after you answer';

                nextButton.disabled = false;
                updateCounterDisplay();
            }

            // advance to next question (infinite)
            function goToNext() {
                if (!userAnswered) {
                    feedbackMsg.innerHTML = 'üìù please answer before moving to next';
                    return;
                }

                if (currentIndex === 19) {
                    currentCycle++;
                    currentIndex = 0;
                } else {
                    currentIndex++;
                }

                loadQuestion();
            }

            nextButton.addEventListener('click', goToNext);

            // initial load
            currentIndex = 0;
            currentCycle = 1;
            loadQuestion();

            // improve touch responsiveness (prevent double‚Äëtap zoom on buttons)
            const allButtons = document.querySelectorAll('button');
            allButtons.forEach(btn => {
                btn.addEventListener('touchstart', (e) => {
                    // just to prevent any pull-to-refresh if over-scrolled, but fine
                }, { passive: true });
            });

        })();
    </script>
</body>
</html>